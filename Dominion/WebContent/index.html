<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Index</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script>
	var numberPlayers = null;
	
	$(document).ready(function() {
		$("input[type=radio][name=number-players]").change(function() {
			numberPlayers = parseInt(this.value);
			
			for (i = 1; i <= numberPlayers; i++) {
				var usernameId = "username-player-" + i;
				$("#"+usernameId).addClass("display");
			}
			
			for (i = numberPlayers + 1; i <= 4; i++) {
				var usernameId = "username-player-" + i;
				$("#"+usernameId).removeClass("display");
			}
	    });
		
		$("#initialize").click(function() {
			var usernameplayer1 = $("#username-player-1").val();
			var usernameplayer2 = $("#username-player-2").val();
			var usernameplayer3 = $("#username-player-3").val();
			var usernameplayer4 = $("#username-player-4").val();
			
			$.ajax({
				type: 'POST',
				data: {operation: "initialize",
					numberplayers: numberPlayers,
					usernameplayer1: usernameplayer1,
					usernameplayer2: usernameplayer2,
					usernameplayer3: usernameplayer3,
					usernameplayer4: usernameplayer4},
				url: 'AjaxController',
				success: function(result){
					$("#result1").html(result);
				}
			});
		});
	});
	
	function validateForm() {
	    var numberPlayers = document.forms["initialize-game"]["number-players"].value;
	    //var usernamesPlayers = document.forms["initialize-game"]["username-players"].value;
	    //console.log(usernamesPlayers);
	    
	    if (numberPlayers == null || numberPlayers == "") {
	        alert("Please choose a number of players.");
	        return false;
	    }
	    
	    for (i = 1; i <= numberPlayers; i++) {
			var usernameName = "username-player-" + i;
			var usernamePlayer = document.forms["initialize-game"][usernameName].value;
			if(usernamePlayer == null || usernamePlayer == "") {
				alert("Please choose a username for every player.");
				return false;
			}
		}
	}
</script>
</head>
<body>
	<div class="menu">
		<form class="initialize-game" id="initialize-game" onsubmit="return validateForm()" method="POST" action="gameplay.html">
			<h2>Choose your number of players.</h2>
			<input id="two-players" type="radio" name="number-players" value="2" />
        	<label class="number-players two-players" for="two-players"></label>
        	<input id="three-players" type="radio" name="number-players" value="3" />
        	<label class="number-players three-players" for="three-players"></label>
        	<input id="four-players" type="radio" name="number-players" value="4" />
        	<label class="number-players four-players" for="four-players"></label>
        	<input id="username-player-1" type="text" name="username-player-1" placeholder="Username player 1">
        	<label class="username-players" for="username-player-1"></label>
        	<input id="username-player-2" type="text" name="username-player-2" placeholder="Username player 2">
        	<label class="username-players" for="username-player-2"></label>
        	<input id="username-player-3" type="text" name="username-player-3" placeholder="Username player 3">
        	<label class="username-players" for="username-player-3"></label>
        	<input id="username-player-4" type="text" name="username-player-4" placeholder="Username player 4">
        	<label class="username-players" for="username-player-4"></label>
			<input type="submit" value="Play" id="initialize">
			<span id="result1"></span>
		</form>
	</div>
</body>
</html>