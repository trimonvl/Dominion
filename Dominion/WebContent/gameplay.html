<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Index</title>
<link rel="stylesheet" type="text/css" href="css/default.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.css">
<script>
	$(".detailView").fancybox({
		openEffect	: 'elastic',
		closeEffect	: 'elastic',
	
		helpers : {
			title : {
				type : 'inside'
			}
		}
	});

	$(window).ready(function() {
		var players;
		
		/*window.onbeforeunload = function() {
	        return "";
	    }*/
	    
	    $.ajax({
			type: 'POST',
			data: {operation: "getPlayers"},
			url: 'AjaxController',
			success: function(result){
				$(".players").html(result);
			}
		});
	    
	    $.ajax({
			type: 'POST',
			data: {operation: "getVictoryCards"},
			url: 'AjaxController',
			success: function(result){
				$(".victoryCards").html(result);
				resizeCards();
			}
		});
	    
	    $.ajax({
			type: 'POST',
			data: {operation: "getTreasureCards"},
			url: 'AjaxController',
			success: function(result){
				$(".treasureCards").html(result);
				resizeCards();
			}
		});
	    
	    $.ajax({
			type: 'POST',
			data: {operation: "getCurseCards"},
			url: 'AjaxController',
			success: function(result){
				$(".curseCards").html(result);
				resizeCards();
			}
		});
	    
	    $.ajax({
			type: 'POST',
			data: {operation: "getKingdomCards"},
			url: 'AjaxController',
			success: function(result){
				$(".kingdomCards").html(result);
				resizeCards();
			}
		});
	    
	    $.ajax({
			type: 'POST',
			data: {operation: "getTrash"},
			url: 'AjaxController',
			success: function(result){
				$(".trashPile").html(result);
				resizeCards();
			}
		});
	    
	    $.ajax({
			type: 'POST',
			data: {operation: "getPlayerOnTurn"},
			url: 'AjaxController',
			success: function(result){
				$("div[name=" + result + "]").addClass("onTurn");
				$(".player .piles:not(div[name=" + result + "] .piles)").addClass("hidden");
			}
		});
	    
	    $.ajax({
			type: 'POST',
			data: {operation: "draw"},
			url: 'AjaxController',
			success: function(result){
				$(".handCards").html(result);
				resizeCards();
				rotateCards();
			}
		});
	    
	    $(".handCards").on("click", ".inHand", function() {
	    	var cardname = $(this).attr("cardname");
	    	var numberinhand = $(this).attr("numberinhand");
		    
		    $(this).appendTo(".playedCards");
		    $(this).removeClass("inHand");
		    $(this).addClass("played");
		    
		    resizeCards();
			
			$.ajax({
				type: 'POST',
				data: {operation: "play",
					cardname: cardname,
					numberinhand: numberinhand},
				url: 'AjaxController',
				success: function(result){
					$("#result2").html(result);
				}
			});
	    });
	});
	
	$(window).resize(function() {
		resizeCards();
		rotateCards();
	});
	
	function resizeCards() {
		var heightVictoryCards = $(".victoryCards .card").height();
		var heightKingdomCards = $(".kingdomCards .card").height();
		var heightTreasureCards = $(".treasureCards .card").height();
		var heightHandCards = $(".handCards .card").height();
		var heightPlayedCards = $(".playedCards .card").height();
		var widthDiscardPileCards = $(".discardPile").width();
		
		var widthVictoryCards = heightVictoryCards * 1.217;
		var widthKingdomCards = heightKingdomCards * 1.217;
		var widthTreasureCards = heightTreasureCards * 1.217;
		var widthHandCards = heightHandCards * 0.652;
		var widthPlayedCards = heightPlayedCards * 0.652;
		var heightDiscardPileCards = widthDiscardPileCards * 1.533;
		
		$(".victoryCards .card, .treasureCards .card, .curseCards .card").css("width", widthVictoryCards);
		$(".kingdomCards .card").css("width", widthKingdomCards);
		$(".handCards .card").css("width", widthHandCards);
		$(".playedCards .card").css("width", widthPlayedCards);
		$(".discardPile, .cardPile").css("height", heightDiscardPileCards);
	}
	
	function rotateCards() {
		var numberHandCards = $(".handCards .card").length;
		var rotateInterval = 30 / (numberHandCards - 1);
		var rotate = -15;
		
		var handCards = document.getElementsByClassName("inHand");
		
		for (i = 0; i < numberHandCards; i++) {		
			handCards[i].style.transform = "rotate(" + rotate + "deg)"; 
			
			rotate += rotateInterval;
		}
		
		if (numberHandCards > 9) {
			var marginLeftHandCards = -100 - (numberHandCards * 5 / 2); 
			$(".handCards .card").css("margin-left", marginLeftHandCards);
			$(".handCards .card:first-child").css("margin-left", "0");
		}
	}
</script>
</head>
<body>
	<div class="left">
		<div class="cards victoryCards">
<!-- 			<div class="card victoryCard provinceSmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
<!-- 			<div class="card victoryCard duchySmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
<!-- 			<div class="card victoryCard estateSmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
		</div>
	</div>
	<div class="left bottom" id="playersContainer">
		<div class="players">
<!-- 			<div class="player" id="playerFour"> -->
<!-- 				<div class="avatar"></div> -->
<!-- 				<div class="piles hidden"> -->
<!-- 					<div class="cardPile"></div> -->
<!-- 					<div class="discardPile"></div> -->
<!-- 				</div> -->
<!-- 			</div> -->
<!-- 			<div class="player" id="playerThree"> -->
<!-- 				<div class="avatar"></div> -->
<!-- 				<div class="piles hidden"> -->
<!-- 					<div class="cardPile"></div> -->
<!-- 					<div class="discardPile"></div> -->
<!-- 				</div> -->
<!-- 			</div> -->
<!-- 			<div class="player" id="playerTwo"> -->
<!-- 				<div class="avatar"></div> -->
<!-- 				<div class="piles hidden"> -->
<!-- 					<div class="cardPile"></div> -->
<!-- 					<div class="discardPile"></div> -->
<!-- 				</div> -->
<!-- 			</div> -->
<!-- 			<div class="player onTurn" id="playerOne"> -->
<!-- 				<div class="halfVertical"> -->
<!-- 					<div class="avatar"></div> -->
<!-- 				</div> -->
<!-- 				<div class="halfVertical"> -->
<!-- 					<div class="piles"> -->
<!-- 						<div class="discardPile"> -->
<!-- 							<div class="amount">9</div> -->
<!-- 						</div> -->
<!-- 						<div class="cardPile"></div> -->
<!-- 					</div> -->
<!-- 				</div> -->
<!-- 			</div> -->
		</div>
	</div>
	<div class="right">
		<div class="cards treasureCards">
<!-- 			<div class="card treasureCard goldSmall"> -->
<!-- 				<div class="amount">10</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
<!-- 			<div class="card treasureCard silverSmall"> -->
<!-- 				<div class="amount">20</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
<!-- 			<div class="card treasureCard copperSmall"> -->
<!-- 				<div class="amount">30</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
		</div>
	</div>
	<div class="right bis">
		<div class="cards curseCards">
<!-- 			<div class="card curseCard curseSmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
		</div>
	</div>
	<div class="right bottom" id="optionsContainer">
		<div class="options">
			<div class="halfHorizontal">
				<button type="button" class="" id="fullscreen">F</button>
				<button type="button" class="">O</button>
				<button type="button" class="">R</button>
			</div>
			<div class="halfHorizontal">
				<div class="piles">
					<div class="trashPile"></div>
				</div>
				<span id="result2"></span>
				<span id="result3"></span>
			</div>
		</div>
	</div>
	<div class="center">
		<div class="cards kingdomCards">
<!-- 			<a id="single_2" href="http://i.imgur.com/6xBi2yT.jpg"> -->
<!-- 				<div class="card kingdomCard moatSmall"> -->
<!-- 					<div class="amount">9</div> -->
<!-- 					<h4 class="name hidden">Cardname</h4> -->
<!-- 					<div class="image hidden"></div> -->
<!-- 					<div class="cost">5</div> -->
<!-- 					<h6 class="type hidden">Cardtype</h6> -->
<!-- 					<button type="button" class="buy">+</button> -->
<!-- 				</div> -->
<!-- 			</a> -->
<!-- 			<div class="card kingdomCard festivalSmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
<!-- 			<div class="card kingdomCard adventurerSmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
<!-- 			<div class="card kingdomCard thiefSmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
<!-- 			<div class="card kingdomCard mineSmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
<!-- 			<div class="card kingdomCard gardensSmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
<!-- 			<div class="card kingdomCard throneRoomSmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
<!-- 			<div class="card kingdomCard councilRoomSmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
<!-- 			<div class="card kingdomCard workshopSmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
<!-- 			<div class="card kingdomCard woodcutterSmall"> -->
<!-- 				<div class="amount">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 				<button type="button" class="buy">+</button> -->
<!-- 			</div> -->
		</div>
		<div class="cards playedCards">
			<div class="overviewTurn">
				<h4>Actions</h4>
				<div class="amountActions">1</div>
				<h4>Buys</h4>
				<div class="amountBuys">1</div>
				<h4>Coins</h4>
				<div class="amountCoins">0</div>
			</div>
			<div class="actionButtons">
				<button type="button" class="">Action</button>
				<button type="button" class="">Action with a long description</button>
			</div>
		</div>
		<div class="cards handCards">
<!-- 			<div class="card inHand kingdomCard copperLarge" cardname="Copper"> -->
<!-- 				<div class="value">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 			</div> -->
<!-- 			<div class="card inHand kingdomCard copperLarge" cardname="Copper"> -->
<!-- 				<div class="value">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 			</div> -->
<!-- 			<div class="card inHand victoryCard provinceLarge" cardname="Province"> -->
<!-- 				<div class="value">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 			</div> -->
<!-- 			<div class="card inHand victoryCard gardensLarge" cardname="Gardens"> -->
<!-- 				<div class="value">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 			</div> -->
<!-- 			<div class="card inHand victoryCard councilRoomLarge" cardname="CouncilRoom"> -->
<!-- 				<div class="value">9</div> -->
<!-- 				<h4 class="name hidden">Cardname</h4> -->
<!-- 				<div class="image hidden"></div> -->
<!-- 				<div class="cost">5</div> -->
<!-- 				<h6 class="type hidden">Cardtype</h6> -->
<!-- 			</div> -->
		</div>
	</div>
</body>
</html>